<div class="container space">

    <h2>Usuario</h2>

    <div ng-if="userEditCtrl.isLoading" class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <div ng-if="!userEditCtrl.isLoading" class="row justify-content-center mt-3">
        <div class="col-md-12">
            <form name="formEdit" ng-submit="userEditCtrl.submit()" class="card">
                <div>
                    <button type="submit" class="btn btn-primary"
                        ng-disabled="!userEditCtrl.isValid()">Guardar</button>
                    <button type="button" class="btn btn-secondary" ng-click="userEditCtrl.goBack()">Atrás</button>
                </div>
                <div ng-if="!userEditCtrl.isNew" class="card-header">
                    <label for="id">ID</label>
                    <input ng-if="!userEditCtrl.isNew" type="text" class="form-control" placeholder="Identificación"
                        ng-model="userEditCtrl.userModel.id" readonly>
                    <input ng-if="userEditCtrl.isNew" id="id" name="id" type="number" class="form-control"
                        placeholder="Identificación" ng-model="userEditCtrl.userModel.id" readonly>
                    <small ng-if="formEdit.id.$invalid && (formEdit.id.$touched||formEdit.id.$dirty)"
                        class="form-text text-danger">Debe ingresar el id.</small>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="email">Correo:</label>
                        <input id="email" name="email" type="text" class="form-control" placeholder="Correo"
                            ng-model="userEditCtrl.userModel.email" required ng-readonly="!userEditCtrl.isNew">
                        <small ng-if="formEdit.email.$invalid && (formEdit.email.$touched || formEdit.email.$dirty)"
                            class="form-text text-danger">Debe ingresar un correo.</small>
                    </div>
                    <div class="mb-3">
                        <label for="lastLogin">Último login:</label>
                        <input id="lastLogin" name="lastLogin" type="text" class="form-control"
                            placeholder="Último login" ng-model="userEditCtrl.getLastLogin()" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="datePassword">Cambio contraseña:</label>
                        <input id="datePassword" name="datePassword" type="text" class="form-control"
                            placeholder="Cambio contraseña" ng-model="userEditCtrl.getDatePassword()" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="password">Contraseña:</label>
                        <input type="password" class="form-control" id="password" name="password"
                            ng-model="userEditCtrl.userModel.password" placeholder="Contraseña" required
                            ng-minlength="8">
                        <small class="text-danger"
                            ng-if="formEdit.password.$error.required && (formEdit.password.$touched || formEdit.password.$dirty || formEdit.$submitted)">
                            Debe ingresar la contraseña.
                        </small>
                        <small class="text-danger"
                            ng-if="formEdit.password.$error.minlength && (formEdit.password.$touched || formEdit.password.$dirty || formEdit.$submitted)">
                            La contraseña debe tener mínimo 8 caracteres.
                        </small>
                    </div>
                    <div class="mb-3">
                        <label for="confirm">Confirmar contraseña:</label>
                        <input type="password" class="form-control" id="confirm" name="confirm"
                            ng-model="userEditCtrl.confirm" placeholder="Contraseña" required>
                        <small class="text-danger"
                            ng-if="formEdit.confirm.$error.required && (formEdit.confirm.$touched || formEdit.confirm.$dirty || formEdit.$submitted)">
                            Debe confirmar la contraseña.
                        </small>
                        <small class="text-danger"
                            ng-if="!formEdit.confirm.$error.required && !userEditCtrl.isConfirm() && (formEdit.confirm.$touched || formEdit.confirm.$dirty || formEdit.$submitted)">
                            Las contraseñas no coinciden.
                        </small>
                    </div>
                    <div>
                        <button type="submit" class="btn btn-primary" ng-disabled="!userEditCtrl.isValid()">Guardar</button>
                        <button type="button" class="btn btn-secondary" ng-click="userEditCtrl.goBack()">Atrás</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>